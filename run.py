from much_more_songs import *

my_runner = MuchMoreRunner()
my_data = my_runner.run('26R3e7bjY6e9dlgghide8L')

print(my_data)

#ee = {'The Sheltering Sky': {'id': 'Q1988792', 'description': 'novel by Paul Bowles', 'relevance': 3, 'dependency_score': 0, 'person_in_description': 1, 'person_in_wikidata': 1, 'similarity_score': 0.3401, 'final_score': 2.3401, 'wikipedia_url': 'https://en.wikipedia.org/wiki/The_Sheltering_Sky', 'li_tags': '[<li>The 1981 album <i><a href="/wiki/Discipline_(King_Crimson_album)" title="Discipline (King Crimson album)">Discipline</a></i> by <a href="/wiki/King_Crimson" title="King Crimson">King Crimson</a> includes an eight-minute instrumental composition titled "The Sheltering Sky". "Sheltering sky" is also referenced in the lyrics of the song "Walking on Air" from their 1995 album <i><a class="mw-redirect" href="/wiki/THRAK" title="THRAK">THRAK</a></i>.</li>, <li>The 1983 album <a href="/wiki/Synchronicity_(The_Police_album)" title="Synchronicity (The Police album)"><i>Synchronicity</i></a> by <a href="/wiki/The_Police" title="The Police">the Police</a> includes a song called "<a href="/wiki/Tea_in_the_Sahara" title="Tea in the Sahara">Tea in the Sahara</a>", the lyrics of which contain the phrase "beneath the sheltering sky" and are based on the tragic story of the three dancers who wish to have tea in the desert, but end up dead from the heat, with their cups filled only with sand. The story is told to the character Port in Chapter 5.</li>, <li>The 1992 album <i>Beyond the Sky</i> by <a class="mw-redirect" href="/wiki/Omar_Faruk_Tekbilek" title="Omar Faruk Tekbilek">Omar Faruk Tekbilek</a> was inspired by the film version of <i>The Sheltering Sky</i>.<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (May 2023)">citation needed</span></a></i>]</sup></li>, <li>The 1992 album <i>Woman to Woman</i> by <a class="mw-redirect" href="/wiki/Fem_2_Fem" title="Fem 2 Fem">Fem 2 Fem</a> has a reference to this book in the song "Obsession".<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (May 2023)">citation needed</span></a></i>]</sup></li>, <li>The song "Lost" by <a href="/wiki/Neurosis_(band)" title="Neurosis (band)">Neurosis</a> on the album <i><a href="/wiki/Enemy_of_the_Sun" title="Enemy of the Sun">Enemy of the Sun</a></i> opens with a sample from the film. Also their album <i><a href="/wiki/The_Eye_of_Every_Storm" title="The Eye of Every Storm">The Eye of Every Storm</a></i> has a tracks entitled "Shelter" and " A Season in the Sky".</li>, <li><a href="/wiki/The_God_Machine_(band)" title="The God Machine (band)">The God Machine</a>\'s first album <i><a href="/wiki/Scenes_from_the_Second_Storey" title="Scenes from the Second Storey">Scenes from the Second Storey</a></i> opens with a similar sample.</li>, <li>The song "İki Yabancı" by <a href="/wiki/Teoman_(singer)" title="Teoman (singer)">Teoman</a> on the album <i><a class="new" href="/w/index.php?title=On_Yedi&amp;action=edit&amp;redlink=1" title="On Yedi (page does not exist)">On Yedi</a></i> makes a lyrical reference to the Turkish title of the movie.<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (May 2023)">citation needed</span></a></i>]</sup></li>, <li>The 2001 album <i><a href="/wiki/Hypothetical_(album)" title="Hypothetical (album)">Hypothetical</a></i> by <a href="/wiki/Threshold_(band)" title="Threshold (band)">Threshold</a> has a song titled "Sheltering Sky."<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="without a reliable source, this looks like a trivial mention (May 2023)">citation needed</span></a></i>]</sup></li>, <li>The song "fullmoon" from <a href="/wiki/Ryuichi_Sakamoto" title="Ryuichi Sakamoto">Ryuichi Sakamoto</a>\'s 2017 album <i><a href="/wiki/Async_(album)" title="Async (album)">async</a></i> contains excerpts of the novel presented in several languages.</li>]', 'dbpedia-type': 'http://www.w3.org/2002/07/owl#Thing', 'wiki_links': {'<a href="/wiki/The_Eye_of_Every_Storm" title="The Eye of Every Storm">The Eye of Every Storm</a>': {'wikipedia link': '/wiki/The_Eye_of_Every_Storm', 'text': ['The Eye of Every Storm'], 'entity id': 'Entity-1', 'class': 'MusicalWork', 'label': 'The Eye of Every Storm', 'db_uri': 'http://dbpedia.org/resource/The_Eye_of_Every_Storm'}, '<a href="/wiki/The_Police" title="The Police">the Police</a>': {'wikipedia link': '/wiki/The_Police', 'text': ['the Police'], 'entity id': 'Entity-2', 'class': 'Group', 'label': 'The Police', 'db_uri': 'http://dbpedia.org/resource/The_Police'}, '<a href="/wiki/Discipline_(King_Crimson_album)" title="Discipline (King Crimson album)">Discipline</a>': {'wikipedia link': '/wiki/Discipline_(King_Crimson_album)', 'text': ['Discipline'], 'entity id': 'Entity-3', 'class': 'MusicalWork', 'label': 'Discipline (King Crimson album)', 'db_uri': 'http://dbpedia.org/resource/Discipline_(King_Crimson_album)'}, '<a href="/wiki/Hypothetical_(album)" title="Hypothetical (album)">Hypothetical</a>': {'wikipedia link': '/wiki/Hypothetical_(album)', 'text': ['Hypothetical'], 'entity id': 'Entity-4', 'class': 'MusicalWork', 'label': 'Hypothetical (album)', 'db_uri': 'http://dbpedia.org/resource/Hypothetical_(album)'}, '<a href="/wiki/Synchronicity_(The_Police_album)" title="Synchronicity (The Police album)"><i>Synchronicity</i></a>': {'wikipedia link': '/wiki/Synchronicity_(The_Police_album)', 'text': ['Synchronicity'], 'entity id': 'Entity-5', 'class': 'MusicalWork', 'label': 'Synchronicity (The Police album)', 'db_uri': 'http://dbpedia.org/resource/Synchronicity_(The_Police_album)'}, '<a href="/wiki/Threshold_(band)" title="Threshold (band)">Threshold</a>': {'wikipedia link': '/wiki/Threshold_(band)', 'text': ['Threshold'], 'entity id': 'Entity-6', 'class': 'Group', 'label': 'Threshold (band)', 'db_uri': 'http://dbpedia.org/resource/Threshold_(band)'}, '<a href="/wiki/Scenes_from_the_Second_Storey" title="Scenes from the Second Storey">Scenes from the Second Storey</a>': {'wikipedia link': '/wiki/Scenes_from_the_Second_Storey', 'text': ['Scenes from the Second Storey'], 'entity id': 'Entity-7', 'class': 'MusicalWork', 'label': 'Scenes from the Second Storey', 'db_uri': 'http://dbpedia.org/resource/Scenes_from_the_Second_Storey'}, '<a href="/wiki/Tea_in_the_Sahara" title="Tea in the Sahara">Tea in the Sahara</a>': {'wikipedia link': '/wiki/Tea_in_the_Sahara', 'text': ['Tea in the Sahara'], 'entity id': 'Entity-8', 'class': 'MusicalWork', 'label': 'Tea in the Sahara', 'db_uri': 'http://dbpedia.org/resource/Tea_in_the_Sahara'}, '<a href="/wiki/The_God_Machine_(band)" title="The God Machine (band)">The God Machine</a>': {'wikipedia link': '/wiki/The_God_Machine_(band)', 'text': ['The God Machine'], 'entity id': 'Entity-9', 'class': 'Group', 'label': 'The God Machine (band)', 'db_uri': 'http://dbpedia.org/resource/The_God_Machine_(band)'}, '<a href="/wiki/Enemy_of_the_Sun" title="Enemy of the Sun">Enemy of the Sun</a>': {'wikipedia link': '/wiki/Enemy_of_the_Sun', 'text': ['Enemy of the Sun'], 'entity id': 'Entity-10', 'class': 'MusicalWork', 'label': 'Enemy of the Sun', 'db_uri': 'http://dbpedia.org/resource/Enemy_of_the_Sun'}, '<a href="/wiki/Neurosis_(band)" title="Neurosis (band)">Neurosis</a>': {'wikipedia link': '/wiki/Neurosis_(band)', 'text': ['Neurosis'], 'entity id': 'Entity-11', 'class': 'Group', 'label': 'Neurosis (band)', 'db_uri': 'http://dbpedia.org/resource/Neurosis_(band)'}, '<a href="/wiki/Async_(album)" title="Async (album)">async</a>': {'wikipedia link': '/wiki/Async_(album)', 'text': ['async'], 'entity id': 'Entity-12', 'class': 'MusicalWork', 'label': 'Async (album)', 'db_uri': 'http://dbpedia.org/resource/Async_(album)'}}, 'fast-check': {'Entity-1': ('/wiki/The_Eye_of_Every_Storm', 'MusicalWork', 'http://dbpedia.org/resource/The_Eye_of_Every_Storm', 'The Eye of Every Storm'), 'Entity-2': ('/wiki/The_Police', 'Group', 'http://dbpedia.org/resource/The_Police', 'The Police'), 'Entity-3': ('/wiki/Discipline_(King_Crimson_album)', 'MusicalWork', 'http://dbpedia.org/resource/Discipline_(King_Crimson_album)', 'Discipline (King Crimson album)'), 'Entity-4': ('/wiki/Hypothetical_(album)', 'MusicalWork', 'http://dbpedia.org/resource/Hypothetical_(album)', 'Hypothetical (album)'), 'Entity-5': ('/wiki/Synchronicity_(The_Police_album)', 'MusicalWork', 'http://dbpedia.org/resource/Synchronicity_(The_Police_album)', 'Synchronicity (The Police album)'), 'Entity-6': ('/wiki/Threshold_(band)', 'Group', 'http://dbpedia.org/resource/Threshold_(band)', 'Threshold (band)'), 'Entity-7': ('/wiki/Scenes_from_the_Second_Storey', 'MusicalWork', 'http://dbpedia.org/resource/Scenes_from_the_Second_Storey', 'Scenes from the Second Storey'), 'Entity-8': ('/wiki/Tea_in_the_Sahara', 'MusicalWork', 'http://dbpedia.org/resource/Tea_in_the_Sahara', 'Tea in the Sahara'), 'Entity-9': ('/wiki/The_God_Machine_(band)', 'Group', 'http://dbpedia.org/resource/The_God_Machine_(band)', 'The God Machine (band)'), 'Entity-10': ('/wiki/Enemy_of_the_Sun', 'MusicalWork', 'http://dbpedia.org/resource/Enemy_of_the_Sun', 'Enemy of the Sun'), 'Entity-11': ('/wiki/Neurosis_(band)', 'Group', 'http://dbpedia.org/resource/Neurosis_(band)', 'Neurosis (band)'), 'Entity-12': ('/wiki/Async_(album)', 'MusicalWork', 'http://dbpedia.org/resource/Async_(album)', 'Async (album)')}, 'to_parse': ['The 1981 album Entity-3 by King Crimson includes an eight-minute instrumental composition titled "The Sheltering Sky". "Sheltering sky" is also referenced in the lyrics of the song "Walking on Air" from their 1995 album THRAK.', 'The 1983 album Entity-5 by Entity-2 includes a song called "Entity-8", the lyrics of which contain the phrase "beneath the sheltering sky" and are inspired by the tragic story of the three dancers who wish to have tea in the desert, but end up dead from the heat, with their cups filled only with sand. The story is told to the character Port in Chapter 5.', 'The 1992 album Beyond the Sky by Omar Faruk Tekbilek was inspired by the film version of The Sheltering Sky.[citation needed]', 'The 1992 album Woman to Woman by Fem 2 Fem has a reference to this book in the song "Obsession".[citation needed]', 'The song "Lost" by Entity-11 on the album Entity-10 opens with a sample from the film. Also their album Entity-1 has a tracks entitled "Shelter" and " A Season in the Sky".', "Entity-9's first album Entity-7 is derived from with a similar sample.", 'The song "İki Yabancı" by Teoman on the album On Yedi makes a lyrical reference to the Turkish title of the movie.[citation needed]', 'The 2001 album Entity-4 by Entity-6 has a song titled "Sheltering Sky."[citation needed]', 'The song "fullmoon" from Ryuichi Sakamoto\'s 2017 album Entity-12 contains excerpts of the novel presented in several languages.'], 'to_parse_txt': 'The 1981 album Entity-3 by King Crimson alludes to an eight-minute instrumental composition titled "The Sheltering Sky". "Sheltering sky" is also referenced in the lyrics of the song "Walking on Air" from their 1995 album THRAK. The 1983 album Entity-5 by Entity-2 includes a song called "Entity-8", the lyrics of which contain the phrase "beneath the sheltering sky" and are based on the tragic story of the three dancers who wish to have tea in the desert, but end up dead from the heat, with their cups filled only with sand. The story is told to the character Port in Chapter 5. The 1992 album Beyond the Sky by Omar Faruk Tekbilek was inspired by the film version of The Sheltering Sky.[citation needed] The 1992 album Woman to Woman by Fem 2 Fem has a reference to this book in the song "Obsession".[citation needed] The song "Lost" by Entity-11 on the album Entity-10 opens with a sample from the film. Also their album Entity-1 has a tracks entitled "Shelter" and " A Season in the Sky". Entity-9\'s first album Entity-7 opens with a similar sample. The song "İki Yabancı" by Teoman on the album On Yedi makes a lyrical reference to the Turkish title of the movie.[citation needed] The 2001 album Entity-4 by Entity-6 has a song titled "Sheltering Sky."[citation needed] The song "fullmoon" from Ryuichi Sakamoto\'s 2017 album Entity-12 contains excerpts of the novel presented in several languages.'}}

#re = RelationExtractor(ee)
#x = re.extract_relations()
#print(x)

#1C2QJNTmsTxCDBuIgai8QV  Resitance (Muse) --working
#26R3e7bjY6e9dlgghide8L Tea in the desert (Police) -- working
#54UFDHWI2q7WHfrGbSNWph Scentless Apprentice (Nirvana) -- working


#09ezgACZuwWZt6CtQSSLRG End of the Night (the Doors) -- extract only minor reference whike main reference not (main reference compare in both English and French)
#!!!!!! + Google Bard returns as output the explaination of how to build a pandas dataframe with entities and relations insted of creating one as it does with other cases

#2B17416FS7vL5qljgqfm7L Te Future is Now (The Offspring) -- extracts 1984 as reference but not "Orwell" (even if it is present in the annotations), however it gets high similarity score but not other scores so it is not included
# !!! + It finds another referece to a single by "The Dead Kennedys" that has no wikipedia page (raising an error) --> what to do? How to be sure that we are talking about a song here?

#1FPSkRkDlthbAceSIIWc4C Welcome Home (Sanitarium) (Metallica) -- refernce present in song description only
#75zMKn5euxQdlkZgu4P42J Sympathy for the devil (Rolling Stones) -- nothing found even if present referece to "The Master and Margherita" (the description also contains them)
#6KCjY5kHvgWaWcAV6BBzxO The Battle of Evermore (Led Zeppelin) -- nothing found even if present references to the Lord of the Rings (same for Ramble On)
#6K8ROjiPJqyHDJS0sA0dwH Rime of the ancient mariner (Iron Maiden) -- isrc not matching between spotify and musicbrainz
#4VqPOruhp5EdPBeR92t6lQ Muse Uprising -- no relation found (do not recognize 1984 and other Muse's songs cited in annotations)
#0tHbQRjL5phd8OoYl2Bdnd Muse United states of Eurasia -- no relation found (do not identify 1984)
#7ouMYWpwJ422jRcDASZB7P Muse Knights of Cydonia -- candidates scrores are too low to be included in the selceted entities
#4xkcGfpM9RwB4IiQ7yx2dB 2+2=5 Radiohead -- no relation receives enough score even if correct and some relations not found (1984 and Dante's Inferno)
#0Kt0khTz1EzjtaQI8A339S Starz in their eyes -- No relation found
#7xRemq7GLu0Tbqe9OckG87 The Man in Me (Dylan) -- No relation gets enough scre even if one is valuable

